(this["webpackJsonpforum-app-frontend"]=this["webpackJsonpforum-app-frontend"]||[]).push([[0],{14:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(6),o=s.n(a),r=s(4),i=s(3),l=s(2);var j=function(){const[e,t]=Object(n.useState)(""),[s,c]=Object(n.useState)(""),[a,o]=Object(n.useState)(""),j=Object(i.q)();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Login"}),Object(l.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o("");const n=await fetch("http://localhost:5001/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),c=await n.json();c.token?(localStorage.setItem("token",c.token),localStorage.setItem("username",e),j("/")):o(c.message||"Login failed")},children:[Object(l.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>c(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Login"})]}),a&&Object(l.jsx)("p",{style:{color:"red"},children:a}),Object(l.jsxs)("p",{children:["Don't have an account? ",Object(l.jsx)(r.b,{to:"/register",children:"Register"})]})]})};var d=function(){const[e,t]=Object(n.useState)(""),[s,c]=Object(n.useState)(""),[a,o]=Object(n.useState)(""),[j,d]=Object(n.useState)(""),b=Object(i.q)();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Register"}),Object(l.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(""),d("");const n=await fetch("http://localhost:5001/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),c=await n.json();n.ok?(d("Registration successful! You can now log in."),setTimeout((()=>b("/login")),1500)):o(c.message||"Registration failed")},children:[Object(l.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>c(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Register"})]}),a&&Object(l.jsx)("p",{style:{color:"red"},children:a}),j&&Object(l.jsx)("p",{style:{color:"green"},children:j}),Object(l.jsxs)("p",{children:["Already have an account? ",Object(l.jsx)(r.b,{to:"/login",children:"Login"})]})]})};var b=e=>{let{categories:t,onSelect:s}=e;return Object(l.jsxs)("div",{className:"category-menu",children:[Object(l.jsx)("h3",{children:"Categories"}),Object(l.jsx)("ul",{children:t.map((e=>Object(l.jsx)("li",{children:Object(l.jsx)("button",{onClick:()=>s(e.id),children:e.name})},e.id)))})]})},u=s(5);var h=e=>{let{category:t,refresh:s}=e;const[c,a]=Object(n.useState)([]),[o,r]=Object(n.useState)({});Object(n.useEffect)((()=>{(async()=>{let e;e=t?"http://localhost:5001/api/questions/category/".concat(t):"http://localhost:5001/api/questions/";const s=await fetch(e);let n=await s.json();t||(n=n.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))).slice(0,5)),a(n)})()}),[t,s]);return Object(l.jsxs)("div",{className:"question-list",children:[Object(l.jsx)("h3",{children:t?"Questions":"Latest 5 Questions"}),Object(l.jsx)("ul",{children:c.map((e=>{var t;return Object(l.jsxs)("li",{children:[Object(l.jsx)("strong",{children:e.title}),Object(l.jsx)("p",{children:e.content}),Object(l.jsxs)("small",{children:["asked by ",(null===(t=e.user)||void 0===t?void 0:t.username)||"Unknown"]}),Object(l.jsxs)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:[Object(l.jsx)("strong",{children:"Answers:"}),Object(l.jsx)("ul",{children:(e.answers||[]).slice(-5).reverse().map(((t,n)=>{var c;return Object(l.jsxs)("li",{style:{marginBottom:"6px"},children:[t.answer,Object(l.jsx)("br",{}),Object(l.jsxs)("small",{children:["answered by ",(null===(c=t.user)||void 0===c?void 0:c.username)||"Unknown"]}),Object(l.jsx)("button",{onClick:()=>(async(e,t)=>{const n=localStorage.getItem("token");await fetch("http://localhost:5001/api/questions/".concat(e,"/answer/").concat(t),{method:"DELETE",headers:{Authorization:n}}),"function"===typeof s&&s()})(e._id,t._id),className:"delete-btn",children:"Delete Answer"})]},t._id||n)}))})]}),Object(l.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async e=>{const t=o[e];if(!t)return;const n=localStorage.getItem("token");await fetch("http://localhost:5001/api/questions/".concat(e,"/answer"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({answer:t})}),r((t=>Object(u.a)(Object(u.a)({},t),{},{[e]:""}))),"function"===typeof s&&s()})(e._id)},style:{marginTop:"10px"},children:[Object(l.jsx)("input",{type:"text",placeholder:"Your answer...",value:o[e._id]||"",onChange:t=>{return s=e._id,n=t.target.value,void r((e=>Object(u.a)(Object(u.a)({},e),{},{[s]:n})));var s,n},style:{width:"70%",marginRight:"8px"}}),Object(l.jsx)("button",{type:"submit",children:"Answer"})]}),Object(l.jsx)("button",{onClick:()=>(async e=>{const t=localStorage.getItem("token");await fetch("http://localhost:5001/api/questions/".concat(e),{method:"DELETE",headers:{Authorization:t}}),"function"===typeof s&&s()})(e._id),className:"delete-btn",children:"Delete Question"})]},e._id)}))})]})};var O=e=>{var t;let{categories:s,selectedCategory:c,onQuestionPosted:a}=e;const[o,r]=Object(n.useState)(""),[i,j]=Object(n.useState)(""),[d,b]=Object(n.useState)(c||(null===(t=s[0])||void 0===t?void 0:t.id)||""),[u,h]=Object(n.useState)(""),[O,p]=Object(n.useState)("");Object(n.useEffect)((()=>{var e;b(c||(null===(e=s[0])||void 0===e?void 0:e.id)||"")}),[c,s]);return Object(l.jsxs)("form",{className:"ask-question",onSubmit:async e=>{e.preventDefault(),h(""),p("");const t=localStorage.getItem("token"),n=await fetch("http://localhost:5001/api/questions/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({title:o,content:i,category:d})}),c=await n.json();var l;n.ok?(p("Question posted!"),r(""),j(""),b((null===(l=s[0])||void 0===l?void 0:l.id)||""),a&&a()):h(c.message||"Error posting question")},children:[Object(l.jsx)("h3",{children:"Ask a Question"}),Object(l.jsx)("input",{type:"text",placeholder:"Title",value:o,onChange:e=>r(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("textarea",{placeholder:"Content",value:i,onChange:e=>j(e.target.value),required:!0}),Object(l.jsx)("br",{}),Object(l.jsx)("select",{value:d,onChange:e=>b(e.target.value),children:s.map((e=>Object(l.jsx)("option",{value:e.id,children:e.name},e.id)))}),Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"submit",children:"Post Question"}),u&&Object(l.jsx)("p",{style:{color:"red"},children:u}),O&&Object(l.jsx)("p",{style:{color:"green"},children:O})]})};var p=()=>{const[e,t]=Object(n.useState)(""),[s,c]=Object(n.useState)([]),[a,o]=Object(n.useState)(null),[r,j]=Object(n.useState)(!1),d=Object(i.q)();Object(n.useEffect)((()=>{c([{name:"Birds",id:"birds"},{name:"Dogs",id:"dogs"},{name:"Cats",id:"cats"},{name:"Rabbits",id:"rabbits"}]),t(localStorage.getItem("username")||"User"),o(null)}),[]);return Object(l.jsxs)("div",{className:"dashboard",children:[Object(l.jsxs)("h1",{children:["Welcome to the Forum, ",e,"!"]}),Object(l.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),d("/login")},children:"Logout"}),Object(l.jsxs)("div",{className:"dashboard-content",children:[Object(l.jsx)(b,{categories:s,onSelect:e=>{o(e)}}),Object(l.jsx)(h,{category:a,refresh:()=>j((e=>!e))}),Object(l.jsx)(O,{categories:s,selectedCategory:a,onQuestionPosted:()=>j((e=>!e))})]})]})};s(8);var x=function(){const e=localStorage.getItem("token");return Object(l.jsx)(r.a,{children:Object(l.jsxs)(i.d,{children:[Object(l.jsx)(i.b,{path:"/login",element:Object(l.jsx)(j,{})}),Object(l.jsx)(i.b,{path:"/register",element:Object(l.jsx)(d,{})}),Object(l.jsx)(i.b,{path:"/",element:e?Object(l.jsx)(p,{}):Object(l.jsx)(i.a,{to:"/login"})})]})})};o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))},8:function(e,t,s){}},[[14,1,2]]]);
//# sourceMappingURL=main.1d475b0c.chunk.js.map